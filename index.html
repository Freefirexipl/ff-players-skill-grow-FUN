<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FreeFire Squad Tournament</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
html,body{
 margin:0;padding:0;width:100%;height:100%;
 color:#fff;font-family:'Rajdhani',sans-serif;background:#000;
}

/* SPLASH */
#videoSplash{position:fixed;inset:0;z-index:999;}
#videoSplash video{width:100vw;height:100vh;object-fit:cover;}

/* BACKGROUND */
#bgVideo{
 position:fixed;
 inset:0;
 z-index:0;
 display:none;
}
#app{
 position:relative;
 z-index:2;
}

#bgVideo video{width:100vw;height:100vh;object-fit:cover;}
body::before{
 content:"";
 position:fixed;
 inset:0;
 background:rgba(0,0,0,0.3); /* lighter dark */
 z-index:-3;               /* send behind video */
}

/* TOP BAR */
.topbar{
 display:grid;
 grid-template-columns: auto 1fr auto;
 align-items:center;
 padding:10px 14px;
 background:rgba(0,0,0,0.85);
 border-bottom:1px solid #ff6600;
}

/* Left text */
.logo-text{
 font-family:'Orbitron';
 font-size:16px;
 color:#ff6600;
 white-space:nowrap;
}

/* Center logo */
.logo-img{
 display:flex;
 justify-content:center;
}
.logo-img img{
 height:40px;
 width:auto;
}

/* Menu button */
.menu-btn{
 font-size:26px;
 cursor:pointer;
 color:#ff6600;
 justify-self:end;
}

/* Mobile adjustments */
@media (max-width:768px){
 .logo-text{
   font-size:13px;
 }
 .logo-img img{
   height:34px;
 }
}

/* TITLE */
.main-title{
 text-align:center;font-family:'Orbitron';
 font-size:24px;margin:12px 0;
 color:#ffcc00;text-shadow:0 0 15px #ff6600;
}

/* DROPDOWN */
.dropdown{
 display:none;position:absolute;top:55px;right:15px;
 background:#111;border:1px solid #ff6600;
 border-radius:10px;min-width:200px;z-index:10;
}
.dropdown a{
 display:block;padding:12px;color:white;
 text-decoration:none;font-weight:700;
}
.dropdown a:hover{background:#ff6600;color:black;}

/* HERO GRID */
.heroes{display:grid;gap:14px;padding:16px;}
@media(max-width:768px){.heroes{grid-template-columns:repeat(2,1fr);}}
@media(min-width:769px){
 .heroes{grid-template-columns:repeat(3,1fr);max-width:1000px;margin:auto;}
}

/* HERO CARD */
.hero{
 background:#0f0f0f;border-radius:14px;
 box-shadow:0 0 15px #ff6600;
 cursor:pointer;transition:.25s;overflow:hidden;
}
.hero:hover{transform:scale(1.05)}
.hero img{width:100%;height:120px;object-fit:cover;}
.hero h3{text-align:center;font-family:'Orbitron';margin:6px 0 2px;font-size:16px;}
.hero p{text-align:center;color:#ffcc00;margin:0 0 8px;font-size:14px;}

/* POPUP */
.popup{
 display:none;position:fixed;inset:0;
 background:rgba(0,0,0,0.9);
 justify-content:center;align-items:center;z-index:20;
}
.box{
 background:#111;padding:20px;border-radius:12px;
 width:90%;max-width:350px;text-align:center;position:relative;
}
.player{
 border:1px solid #ff6600;margin:6px;padding:6px;
 border-radius:6px;display:flex;
 justify-content:space-between;align-items:center;
}
.del{color:red;cursor:pointer;font-weight:bold;}
.full{color:red;font-weight:700;}
.btn{
 margin-top:10px;padding:8px 15px;
 background:#ff6600;border:none;border-radius:6px;
 font-family:'Orbitron';cursor:pointer;
}
.btn:disabled{background:gray}
.close{position:absolute;top:10px;right:15px;font-size:22px;color:#ff6600;cursor:pointer;}
.admin{color:#00ffcc;font-size:12px;margin-top:8px;}

/* SECTIONS */
.section{display:none;padding:20px;}
.section h2{color:#ffcc00;font-family:'Orbitron';}

#soonText{
 text-align:center;
 font-family:'Orbitron';
 font-size:28px;
 margin:10px 0 20px;
 color:#ff0000;
 text-shadow:0 0 20px #ff0000, 0 0 40px #ff6600;
 animation: blink 1.2s infinite;
}

@keyframes blink{
 0%{opacity:1;}
 50%{opacity:0.3;}
 100%{opacity:1;}
}


#videoSplash video,
#bgVideo video{
 width:100vw;
 height:100vh;
}

/* Desktop */
@media (min-width: 769px){
 #videoSplash video,
 #bgVideo video{
   object-fit: cover;
 }
}

/* Mobile */
#videoSplash video,
#bgVideo video{
 width:100vw;
 height:100vh;
}

@media (max-width: 768px){

 /* Splash = keep full video */
 #videoSplash video{
   object-fit: contain;
   background:black;
 }

 /* Background = full screen always */
 #bgVideo video{
   object-fit: cover;
 }
}


</style>
</head>

<body>

<!-- SPLASH -->
<div id="videoSplash">
<video id="intro" autoplay muted playsinline>
<source src="front.mp4" type="video/mp4">
</video>
</div>

<!-- BACKGROUND -->
<div id="bgVideo">
<video id="bg" autoplay muted loop playsinline>
<source src="back.mp4" type="video/mp4">
</video>
</div>


<!-- APP -->
<div id="app" style="display:none">

<div class="topbar">
  <div class="logo-text">FreeFire X IPL</div>

  <div class="logo-img">
    <img src="logo.png" alt="Logo">
  </div>

  <div class="menu-btn" onclick="toggleMenu()">‚ò∞</div>
</div>


<div class="dropdown" id="menu">
 <a href="#" onclick="showSection('rulesSection')">Rules</a>
 <a href="#" onclick="showSection('scheduleSection')">Match Schedule</a>
 <a href="leaderboard.html">Leaderboard</a>
 <a href="view.html">View Teams</a>
 <a href="#" onclick="adminLogin()">Admin Login</a>
</div>


<div class="main-title">FREEFIRE SQUAD TOURNAMENT</div>
<div id="soonText">TOURNAMENT BEGINS SOON...</div>

<div class="heroes">
 <div class="hero" onclick="openTeam('Prabhas')"><img src="prabhas.jpg"><h3>Prabhas</h3><p id="slot-Prabhas">Slots: 0 / 6</p><h3>Register now</h3></div>
 <div class="hero" onclick="openTeam('Allu Arjun')"><img src="allu.jpg"><h3>Allu Arjun</h3><p id="slot-Allu Arjun">Slots: 0 / 6</p><h3>Register now</h3></div>
 <div class="hero" onclick="openTeam('NTR')"><img src="ntr.jpg"><h3>NTR</h3><p id="slot-NTR">Slots: 0 / 6</p><h3>Register now</h3></div>
 <div class="hero" onclick="openTeam('Ram Charan')"><img src="ram.jpg"><h3>Ram Charan</h3><p id="slot-Ram Charan">Slots: 0 / 6</p><h3>Register now</h3></div>
 <div class="hero" onclick="openTeam('Yash')"><img src="yash.jpg"><h3>Yash</h3><p id="slot-Yash">Slots: 0 / 6</p><h3>Register now</h3></div>
 <div class="hero" onclick="openTeam('Vijay')"><img src="vijay.jpg"><h3>Vijay</h3><p id="slot-Vijay">Slots: 0 / 6</p><h3>Register now</h3></div>
</div>

<!-- SECTIONS -->
<div id="rulesSection" class="section">
<h2>Rules</h2>
<ul>
<li>No hacks / cheats</li>
<li>4 players per squad</li>
<li>Room ID shared before match</li>
</ul>
</div>

<div id="scheduleSection" class="section">
<h2>Match Schedule</h2>
<p>Round 1: 7:00 PM</p>
<p>Round 2: 8:00 PM</p>
<p>Final: 9:00 PM</p>
</div>

<div id="leaderboardSection" class="section">
<h2>Leaderboard</h2>
<ol>
<li>Team Prabhas</li>
<li>Team Yash</li>
<li>Team Vijay</li>
</ol>
</div>

<div id="viewSection" class="section">
<h2>Registered Teams</h2>
<div id="viewTeams"></div>
</div>

</div>

<!-- POPUP -->
<div class="popup" id="popup">
<div class="box">
 <div class="close" onclick="closeTeam()">‚úñ</div>
 <h2 id="teamTitle"></h2>
 <p id="slotText"></p>
 <div id="players"></div>
 <button class="btn" id="regBtn" onclick="registerPlayer()">Register Player</button>
 <p id="fullText" class="full"></p>
 <p id="adminText" class="admin"></p>
</div>
</div>

<script>
const MAX=6;
let currentHero="";
let isAdmin=false;

let teams = JSON.parse(localStorage.getItem("teams")) || {
 "Prabhas":[], "Allu Arjun":[], "NTR":[],
 "Ram Charan":[], "Yash":[], "Vijay":[]
};

function saveData(){
 localStorage.setItem("teams", JSON.stringify(teams));
}

intro.onended=()=>{
 videoSplash.style.display="none";
 bgVideo.style.display="block";
 app.style.display="block";
 bg.play();   // üëà add this line
 updateAllSlots();
};

function toggleMenu(){
 menu.style.display = menu.style.display==="block"?"none":"block";
}

function adminLogin(){
 let pass=prompt("Admin Password:");
 if(pass==="admin123"){
  isAdmin=true;
  alert("Admin Mode ON");
 }
}

function openTeam(hero){
 currentHero=hero;
 teamTitle.innerText="Team "+hero;
 updatePopup();
 popup.style.display="flex";
}

function updateAllSlots(){
 for(let hero in teams){
  let el=document.getElementById("slot-"+hero);
  if(el) el.innerText=`Slots: ${teams[hero].length} / ${MAX}`;
 }
}

function updatePopup(){
 players.innerHTML="";
 teams[currentHero].forEach((p,i)=>{
  players.innerHTML+= isAdmin ?
   `<div class="player">${p}<span class="del" onclick="deletePlayer(${i})">‚ùå</span></div>`
   : `<div class="player">${p}</div>`;
 });

 let count=teams[currentHero].length;
 slotText.innerText=`Slots: ${count} / ${MAX}`;
 regBtn.disabled = count>=MAX;
 fullText.innerText = count>=MAX ? "TEAM FULL":"";
 adminText.innerText = isAdmin?"Admin Mode":"";
 saveData();
 updateAllSlots();
}

function registerPlayer(){
 let name=prompt("Enter player name:");
 if(!name || teams[currentHero].length>=MAX) return;
 teams[currentHero].push(name);
 updatePopup();
}

function deletePlayer(i){
 if(confirm("Delete player?")){
  teams[currentHero].splice(i,1);
  updatePopup();
 }
}

function closeTeam(){popup.style.display="none";}

function showSection(id){
 ["rulesSection","scheduleSection","leaderboardSection","viewSection"]
 .forEach(s=>document.getElementById(s).style.display="none");
 document.getElementById(id).style.display="block";
 document.getElementById(id).scrollIntoView({behavior:"smooth"});
 if(id==="viewSection") loadViewTeams();
}

function loadViewTeams(){
 viewTeams.innerHTML="";
 for(let hero in teams){
  let html=`<h3>${hero}</h3>`;
  teams[hero].length===0
   ? html+="<p>No players</p>"
   : teams[hero].forEach(p=>html+=`<div class="player">${p}</div>`);
  viewTeams.innerHTML+=html;
 }
}
</script>
</body>
</html>
